<!DOCTYPE html>
<html>
<head>
<script src="https://unpkg.com/konva@8.3.2/konva.min.js"></script>
<script src="grid.js"></script>
<title>Konva Program</title>
</head>
<body>
<div id="konvaCanvas"></div>
<script>
	'use strict'

    let stage = new Konva.Stage({
        container: 'konvaCanvas',
        width: window.innerWidth,
        height: window.innerHeight
    });
    let layer = new Konva.Layer();
	stage.add(layer); // add the layer to the stage


let episode = {
        Spongebob: {
            name: "Spongebob",
            nets: 10,
            x: 500,
            y: 325,
        },
        Patrick: {
            name: "Patrick",
            jellyfish: 10,
            x: 850,
            y: 325,
        }
    
}

    // // ---- The rendering begins here ----- //

    addGrid(Konva, layer); // comment this line to remove the grid

// background

    let fields = new Konva.Layer();
    stage.add(fields)

    let jellyFishFieldsObj = new Image();
    jellyFishFieldsObj.onload = function () {
        let background = new Konva.Image({
            x: 0,
            y: 0,
            image: jellyFishFieldsObj,
        });
        fields.add(background);
    };
    jellyFishFieldsObj.src = 'jellyfishfields.png';

// Spongebob

let bob = new Konva.Layer();
    stage.add(bob)

let groupBob = new Konva.Group({
    draggable: true
});

bob.add(groupBob)

    let SpongebobObj = new Image();
    SpongebobObj.onload = function () {
        let Spongebob = new Konva.Image({
            x: episode.Spongebob.x,
            y: episode.Spongebob.y,
            image: SpongebobObj,
        });
        groupBob.add(Spongebob);
    };
    SpongebobObj.src = 'spongebob.png';

        // Spongebob Text


let spongebobText = new Konva.Label({
        x: episode.Spongebob.x +200,
        y: episode.Spongebob.y +50,
        opacity: 0.75,
      });

      spongebobText.add(
        new Konva.Tag({
          fill: 'black',
          pointerDirection: 'down',
          pointerWidth: 10,
          pointerHeight: 10,
          lineJoin: 'round',
          shadowColor: 'black',
          shadowBlur: 10,
          shadowOffsetX: 10,
          shadowOffsetY: 10,
          shadowOpacity: 0.5,
        })
      );

      spongebobText.add(
        new Konva.Text({
          text: 'Spongebob Squarepants',
          fontFamily: 'Calibri',
          fontSize: 18,
          padding: 5,
          fill: 'white',
        })
      );

      groupBob.add(spongebobText)

// Patrick

let pat = new Konva.Layer();
    stage.add(pat)

let groupPat = new Konva.Group({
    draggable: true
});

pat.add(groupPat)

    let PatrickObj = new Image();
    PatrickObj.onload = function () {
        let Patrick = new Konva.Image({
            x: episode.Patrick.x,
            y: episode.Patrick.y,
            image: PatrickObj,
        });
        groupPat.add(Patrick);
    };
    PatrickObj.src = 'patrick.png';

let patrickText = new Konva.Label({
        x: episode.Patrick.x +200,
        y: episode.Patrick.y +400,
        opacity: 0.75,
      });

      patrickText.add(
        new Konva.Tag({
          fill: 'black',
          pointerDirection: 'up',
          pointerWidth: 10,
          pointerHeight: 10,
          lineJoin: 'round',
          shadowColor: 'black',
          shadowBlur: 10,
          shadowOffsetX: 10,
          shadowOffsetY: 10,
          shadowOpacity: 0.5,
        })
      );

      patrickText.add(
        new Konva.Text({
          text: 'Patrick Star',
          fontFamily: 'Calibri',
          fontSize: 18,
          padding: 5,
          fill: 'white',
        })
      );

      groupPat.add(patrickText)

        // Patrick Jellyfish

let patJellyfishObj = new Image();
patJellyfishObj.onload = function () {

        for (let i = 0; i < episode.Patrick.lives; i++) {

          let patJellyfish = new Konva.Image({
               x: 50 + i*40,
               y: 5,
               image: patJellyfishObj,
              //  scaleX: 0.3,
              //  scaleY: 0.3
          });
          pat.add(patJellyfish);
     }
};

patJellyfishObj.src = 'jellyfish.png';


    // // The hearts representing the player's lives. The way I've implemented requires the JavaScript `for` loop,
    // // which we will be looking at formally in the next assignment. You are not required to use this technique in
    // // your own rendering. Feel free to just display the number of lives using text instead if you'd like.
    // var heartObj = new Image();
    // heartObj.onload = function () {
    //     for (let i = 0; i < gameData.player.lives; i++) {

    //         var heart = new Konva.Image({
    //             x: 50 + i*40,
    //             y: 5,
    //             image: heartObj,
    //             scaleX: 0.3,
    //             scaleY: 0.3
    //         });
    //         layer.add(heart);
    //     }
    // };
    // heartObj.src = 'heart.png';

    //----- Ignore everything below here for now -----//

</script>
</body>
</html>